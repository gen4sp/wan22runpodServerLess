# –†–µ–∑—é–º–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞: –°–∏—Å—Ç–µ–º–∞ –í–æ—Ä–∫—Ñ–ª–æ—É

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–æ—Ä–∫—Ñ–ª–æ—É

**–î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã:**

-   `workflows/__init__.py` - –≠–∫—Å–ø–æ—Ä—Ç—ã –º–æ–¥—É–ª—è
-   `workflows/base.py` - –ë–∞–∑–æ–≤—ã–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å `WorkflowBase`
-   `workflows/wan22.py` - –í–æ—Ä–∫—Ñ–ª–æ—É WAN 2.2 (–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –∏–∑ —Ö–µ–Ω–¥–ª–µ—Ä–∞)
-   `workflows/simple_test.py` - –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ –≤–æ—Ä–∫—Ñ–ª–æ—É
-   `workflows/loader.py` - –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Ä–µ–µ—Å—Ç—Ä –≤–æ—Ä–∫—Ñ–ª–æ—É

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –≥–ª–∞–≤–Ω—ã–π —Ö–µ–Ω–¥–ª–µ—Ä

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `rp_handler.py`:**

-   –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `create_wan22_workflow()` (–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ –∫–ª–∞—Å—Å)
-   –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `workflow` –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
-   –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `list_workflows` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤–æ—Ä–∫—Ñ–ª–æ—É
-   –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤ T2V/I2V –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–æ—Ä–∫—Ñ–ª–æ—É
-   –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∏–¥–µ–æ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

-   `test_workflows.json` - –ù–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤–æ—Ä–∫—Ñ–ª–æ—É
-   `test_workflows.py` - –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
-   –û–±–Ω–æ–≤–ª–µ–Ω `test_input.json` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `workflow`

### ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

-   `WORKFLOW_SYSTEM.md` - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –≤–æ—Ä–∫—Ñ–ª–æ—É
-   `REFACTOR_SUMMARY.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å —Ä–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –≤–æ—Ä–∫—Ñ–ª–æ—É

```json
{
    "input": {
        "prompt": "–û–ø–∏—Å–∞–Ω–∏–µ",
        "workflow": "wan22" // –∏–ª–∏ "test", "simple", "default"
    }
}
```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ—Ä–∫—Ñ–ª–æ—É

```json
{
    "input": {
        "action": "list_workflows"
    }
}
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–ö–∞–∂–¥—ã–π –≤–æ—Ä–∫—Ñ–ª–æ—É –∏–º–µ–µ—Ç —Å–≤–æ–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –æ–ø—Ü–∏–∏.

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Ä–µ–∂–∏–º–æ–≤

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ –≤–æ—Ä–∫—Ñ–ª–æ—É T2V –∏–ª–∏ I2V —Ä–µ–∂–∏–º.

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ—Ä–∫—Ñ–ª–æ—É

1. **wan22** / **wan2.2** / **default** - WAN 2.2 –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ

    - T2V: ‚úÖ | I2V: ‚úÖ
    - 17 —É–∑–ª–æ–≤ ComfyUI

2. **test** / **simple** - –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π –≤–æ—Ä–∫—Ñ–ª–æ—É
    - T2V: ‚ùå | I2V: ‚úÖ
    - 9 —É–∑–ª–æ–≤ ComfyUI

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

-   ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `workflow` –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
-   ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã WAN 2.2 —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
-   ‚úÖ –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ API —Ä–∞—Å—à–∏—Ä–µ–Ω, –Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ:

-   ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ—Ä–∫—Ñ–ª–æ—É (5 –≤–æ—Ä–∫—Ñ–ª–æ—É –∑–∞–≥—Ä—É–∂–µ–Ω–æ)
-   ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –≤–æ—Ä–∫—Ñ–ª–æ—É (WAN 2.2: 17 —É–∑–ª–æ–≤, Simple: 9 —É–∑–ª–æ–≤)
-   ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–ø—Ü–∏–π
-   ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Ä–µ–∂–∏–º–æ–≤

## –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –≤–æ—Ä–∫—Ñ–ª–æ—É

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å, –Ω–∞—Å–ª–µ–¥—É—é—â–∏–π `WorkflowBase`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã
3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤ `workflows/loader.py`
4. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã

–ü—Ä–∏–º–µ—Ä:

```python
class MyWorkflow(WorkflowBase):
    def create_workflow(self, prompt, image_filename, options=None):
        # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞
        return workflow_dict
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

-   üéØ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –≤–æ—Ä–∫—Ñ–ª–æ—É –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω
-   üîß **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –≤–æ—Ä–∫—Ñ–ª–æ—É
-   ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –≤–æ—Ä–∫—Ñ–ª–æ—É –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
-   üìö **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** - —á–µ—Ç–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –ø—Ä–∏–º–µ—Ä—ã
-   üîÑ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –Ω–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
python3 test_workflows.py

# –ó–∞–ø—É—Å–∫ —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–æ—Ä–∫—Ñ–ª–æ—É
python3 example_usage.py  # —Ñ–∞–π–ª –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–ª—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
```
